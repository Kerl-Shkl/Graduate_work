%! TEX root = ../main.tex
\documentclass[a4paper,14pt,russian]{extreport}

\usepackage{extsizes}
\usepackage{cmap}             % для кодировки шрифтов в pdf
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{tempora}

\usepackage{graphicx}         % для вставки рисунков
\graphicspath{{./images}}
\usepackage{amssymb,amsfonts,amsmath,amsthm} % математические дополнения от АМС
\usepackage{indentfirst}      % отделять первую строку раздела абзацным отступом
\usepackage[usenames,dvipsnames]{color} % названия цветов
\usepackage{makecell}
\usepackage{multirow}
\usepackage{ulem}             % подчеркивание

\linespread{1.3}              % полуторный интервал
\frenchspacing

\usepackage{tabularx}

\usepackage{ragged2e}

%--------------- Page number ---------------  
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\small \thepage}
\fancyheadoffset{0mm}
\fancyfootoffset{0mm}
\setlength{\headheight}{17pt}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancypagestyle{plain}{ 
    \fancyhf{}
    \rhead{\small \thepage}}
\setcounter{page}{5} % начать нумерацию страниц с №5
%-------------------------------------------  

%-------------- Captions -------------------  
\usepackage[tableposition=top]{caption}
\usepackage{subcaption}
\DeclareCaptionLabelFormat{gostfigure}{Рис. #2}
\DeclareCaptionLabelFormat{gosttable}{Таблица #2}
\DeclareCaptionLabelFormat{gostsubfigure}{#2.}
\DeclareCaptionFormat{my_table_format}{\hfill #1 \par #3}
\DeclareCaptionLabelSeparator{gost}{~}
\captionsetup{labelsep=gost}
\captionsetup[figure]{labelformat=gostfigure, singlelinecheck=off, 
                      justification=centering}
\captionsetup[subfigure]{labelformat=gostsubfigure}
\captionsetup[table]{format=my_table_format, labelformat=gosttable}
\renewcommand{\thesubfigure}{\asbuk{subfigure}}
%-------------------------------------------  

%------------- Title (headers) -------------  
\usepackage{titlesec}

\titleformat{\chapter}  % command 
    [block]             % shape
    {\filcenter}        % format
    {\textbf{\MakeUppercase{\chaptertitlename} \thechapter.}} % label
    {\wordsep}          % sep
    {\bfseries}         % before
    {}                  % after
 
\titleformat{\section}
    {\normalsize\bfseries\filcenter}
    {\thesection.}
    {\wordsep}
    {}

\titleformat{\subsection}
    {\normalsize\filcenter}
    {\thesubsection.}
    {\wordsep}
    {}

\titlespacing*{\chapter}{0pt}{-30pt}{10pt}
\titlespacing*{\section}{0pt}{10pt}{10pt}
\titlespacing*{\subsection}{0pt}{10pt}{10pt}
%-------------------------------------------  

%------------ Page indentation -------------
\setlength{\parindent}{1.25cm}
\usepackage{geometry}
\geometry{left=3cm}
\geometry{right=1cm}
\geometry{top=2cm}
\geometry{bottom=2cm}
%-------------------------------------------  


%------------ items lists -----------------
\usepackage{enumitem}
\makeatother
%\setlist{nolistsep, leftmargin=0pt, 
%        itemindent=\dimexpr\labelwidth+\labelsep\relax}
\setlist{nolistsep, leftmargin=0pt, labelindent=\parindent,
         listparindent=\parindent, labelwidth=10pt, itemindent=!}
\renewcommand{\labelitemi}{---}
%-------------------------------------------  

%---------- table of contents --------------
\usepackage{tocloft}

\renewcommand{\cfttoctitlefont}{\normalsize\hspace{0.38\textwidth}
                                \bfseries\MakeUppercase}
\renewcommand{\cftbeforetoctitleskip}{-1em}
\renewcommand{\cftaftertoctitleskip}{1em}
\renewcommand{\cftchappagefont}{\normalsize\normalfont} % номер страницы у глав
\renewcommand{\cftchapfont}{\normalsize}
\renewcommand{\cftchapleader}{\cftdotfill{\cftsecdotsep}} % точки между главой и
                                                          % страницей
\renewcommand{\cftsecindent}{0em}
\renewcommand{\cftsubsecindent}{0em}
\renewcommand{\cftsecaftersnum}{.}
\renewcommand{\cftsubsecaftersnum}{.}
%\renewcommand{\cftsubsecfont}{\hspace{11pt}}
\renewcommand{\cftbeforechapskip}{0pt} % убирает разрыв между главами
\renewcommand{\cftparskip}{-1mm}
\renewcommand{\cftdotsep}{1}
\setcounter{tocdepth}{2} % задать глубину оглавления — до subsection включительно

\AtBeginDocument{\renewcommand{\contentsname}{Содержание}}

%-------------------------------------------  

\newcommand{\StdChapter}[1]{
      \stepcounter{chapter}
      \chapter*{ГЛАВА \thechapter. \MakeUppercase{#1}}
      \addcontentsline{toc}{chapter}{Глава \thechapter. #1}
}


%------------ listings --------------------
\usepackage{listings}
\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}
%------------------------------------------
